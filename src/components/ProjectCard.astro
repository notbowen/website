---
import type { CollectionEntry } from "astro:content";

import { Image } from "astro:assets";

type Props = {
    entry: CollectionEntry<"projects">;
};

const { entry } = Astro.props;
---

<a
    href={`${entry.data.repoURL}`}
    target="_blank"
    class="group relative flex flex-col rounded-lg border border-black/15 dark:border-white/20 hover:bg-black/5 dark:hover:bg-white/5 hover:text-black dark:hover:text-white transition-colors duration-300 ease-in-out h-full"
>
    {
        entry.data.image && (
            <div class="w-full h-48 overflow-hidden rounded-t-lg border-b border-black/15 dark:border-white/20 group-hover:border-transparent">
                {typeof entry.data.image === "string" ? (
                    <img
                        src={entry.data.image}
                        alt={entry.data.title}
                        class="w-full h-full object-cover transition-transform duration-300 ease-in-out group-hover:scale-105"
                    />
                ) : (
                    <Image
                        src={entry.data.image}
                        alt={entry.data.title}
                        class="w-full h-full object-cover transition-transform duration-300 ease-in-out group-hover:scale-105"
                    />
                )}
            </div>
        )
    }

    {
        !entry.data.image && (
            <div class="w-full h-48 bg-black/5 dark:bg-white/5 rounded-t-lg border-b border-black/15 dark:border-white/20 flex items-center justify-center">
                <span class="text-4xl">ðŸ“¦</span>
            </div>
        )
    }

    <div class="flex flex-col flex-1 p-5">
        <div class="font-semibold">
            {entry.data.title}
        </div>
        <div class="text-sm line-clamp-2 mb-2">
            {entry.data.description}
        </div>
        <div class="text-xs opacity-75 mt-auto flex justify-end">
            {
                entry.data.date.toLocaleDateString("en-US", {
                    month: "short",
                    year: "numeric",
                })
            }
            {
                entry.data.dateEnd && (
                    <>
                        {" - "}
                        {typeof entry.data.dateEnd === "string"
                            ? entry.data.dateEnd
                            : entry.data.dateEnd.toLocaleDateString("en-US", {
                                  month: "short",
                                  year: "numeric",
                              })}
                    </>
                )
            }
        </div>
    </div>
</a>
